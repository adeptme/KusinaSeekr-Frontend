<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Kitchen | KusinaSeekr</title>
    
    <link rel="stylesheet" href="../CSS/global.css">
    <link rel="stylesheet" href="../CSS/profile.css">
    <link rel="stylesheet" href="../CSS/responsive.css">
    <!-- Reusing settings CSS for form styles inside the modal -->
    <link rel="stylesheet" href="../CSS/settings.css"> 
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500;600&family=Lato&family=Nunito:wght@600;700&family=Merriweather&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <header class="site-header">
        <a href="../index.html" class="logo-container">
            <!-- ADDED: Logo (Up one level) -->
            <img src="../images/kusina-logo.jpg" alt="KusinaSeekr Logo" class="logo-icon">
            <h1 class="logo-text">KusinaSeekr</h1>
        </a>

        <button class="burger-menu" id="burger-menu">
            &#9776;
        </button>
        
        <div class="header-right" id="nav-menu">
            <nav class="navbar">
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="search/ingredient&recipeSearch.html">Recipes</a></li>
                    <li><a href="search/tutorialSearch.html">Cooking Tutorials</a></li>
                    <li><a href="community.html">Community</a></li>
                    <li><a href="profile.html" class="active" style="color: #E2725B;">Profile</a></li>
                </ul>
            </nav>
            <a href="../Logging/login.html" class="lg-button">Log Out</a>
        </div>
    </header>

    <main class="profile-main">
        
        <!-- 1. The "Cover" Area -->
        <section class="profile-banner-wrapper">
            <div class="profile-cover">
                <!-- Using a food texture or user uploaded cover -->
                <img src="https://placehold.co/1200x350?text=My+Kitchen+Cover" alt="Cover Photo">
                <button class="edit-cover-btn" onclick="openEditModal('cover')"><i class="fas fa-camera"></i> Edit Cover</button>
            </div>
            
            <div class="profile-identity-bar">
                <div class="avatar-container">
                    <img id="profile-avatar" src="https://placehold.co/150?text=User" alt="Profile Pic" onerror="this.src='https://placehold.co/150?text=User'">
                    <button class="edit-avatar-btn" onclick="openEditModal('avatar')"><i class="fas fa-camera"></i></button>
                </div>
                
                <div class="identity-info">
                    <h1 class="profile-name" id="profile-name">Loading Chef...</h1>
                </div>

                <div class="profile-actions">
                    <!-- Changed link to open modal instead of page navigation for quick edits -->
                    <button class="action-btn secondary" onclick="openEditModal('details')"><i class="fas fa-pencil-alt"></i> Edit Profile</button>
                    <a href="#" class="action-btn primary"><i class="fas fa-plus"></i> Create Recipe</a>
                </div>
            </div>
        </section>

        <!-- 2. The Two-Column Social Layout -->
        <div class="profile-grid-layout">
            
            <!-- LEFT COLUMN: Intro & Stats (Like FB Sidebar) -->
            <aside class="profile-sidebar">
                
                <!-- Intro Card -->
                <div class="sidebar-card intro-card">
                    <h3>About</h3>
                    
                    <p class="bio-text" id="profile-bio">
                        Loading bio...
                    </p>
                    
                    <button class="edit-bio-btn" onclick="openEditModal('bio')">Edit Bio</button>
                </div>

                <!-- Photos Preview -->
                <div class="sidebar-card">
                    <div class="card-header-row">
                        <h3>Photos</h3>
                        <a href="#">See All</a>
                    </div>
                    <div class="mini-gallery">
                        <img src="https://placehold.co/100?text=1">
                        <img src="https://placehold.co/100?text=2">
                        <img src="https://placehold.co/100?text=3">
                        <img src="https://placehold.co/100?text=4">
                        <img src="https://placehold.co/100?text=5">
                        <img src="https://placehold.co/100?text=6">
                    </div>
                </div>

            </aside>

            <!-- RIGHT COLUMN: The Feed (Reddit/FB Mix) -->
            <section class="profile-feed">
                
                <!-- Filter / Tabs (Visual Only, no functionality needed) -->
                <div class="feed-filters">
                    <button class="active">All Activity</button>
                    <button>Recipes</button>
                    <button>Reviews</button>
                </div>

                <!-- The Dynamic Content Feed -->
                <div id="profile-posts-container">
                    <!-- Loading State -->
                    <div class="feed-loader">
                        <i class="fas fa-spinner fa-spin"></i> Fetching your kitchen history...
                    </div>
                </div>

            </section>

        </div>

    </main>

    <!-- EDIT PROFILE MODAL -->
    <div id="editProfileModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeEditModal()">&times;</span>
            <h2 id="modal-title">Edit Profile</h2>
            
            <!-- Form Container -->
            <form id="profile-edit-form" class="settings-form">
                
                <!-- Hidden User ID field (Read Only for reference if needed by JS later) -->
                <div class="input-group">
                    <label for="modal-user-id">User ID (Read Only)</label>
                    <input type="text" id="modal-user-id" readonly style="background-color: #f0f0f0; color: #666; cursor: not-allowed;">
                </div>

                <!-- Dynamic Sections (toggled via JS based on what button clicked, or show all) -->
                <div id="edit-details-section">
                    <div class="input-group">
                        <label for="modal-full-name">Full Name</label>
                        <input type="text" id="modal-full-name" placeholder="e.g. Juan dela Cruz">
                    </div>
                    <div class="input-group">
                        <label for="modal-username">Username</label>
                        <input type="text" id="modal-username" placeholder="Username">
                    </div>
                    <div class="input-group">
                        <label for="modal-location">Location</label>
                        <input type="text" id="modal-location" placeholder="e.g. Manila, Philippines">
                    </div>
                </div>

                <div id="edit-bio-section">
                    <div class="input-group">
                        <label for="modal-bio">Bio</label>
                        <textarea id="modal-bio" rows="4" placeholder="Tell us about yourself..." style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; resize: vertical;"></textarea>
                    </div>
                </div>

                <div id="edit-visuals-section">
                    <div class="input-group">
                        <label for="modal-avatar-url">Avatar URL</label>
                        <input type="text" id="modal-avatar-url" placeholder="https://...">
                    </div>
                    <div class="input-group">
                        <label for="modal-cover-url">Cover Photo URL</label>
                        <input type="text" id="modal-cover-url" placeholder="https://...">
                    </div>
                </div>

                <button type="submit" class="save-settings-btn" style="width: 100%;">Save Changes</button>
            </form>
        </div>
    </div>

    <footer>
        <p>Â© 2025 KusinaSeekr. All Rights Reserved.</p>
        <hr>
    </footer>

    <script src="../JS/main.js"></script>
</body>
</html>